name: Deploy to VPS

on:
    push:
        branches:
            - main

jobs:
    deploy:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout code
              uses: actions/checkout@v3

            - name: Deploy over SSH
              uses: appleboy/ssh-action@master
              with:
                host: ${{ secrets.VPS_HOST }}
                username: ${{ secrets.VPS_USER }}
                key: ${{ secrets.VPS_SSH_KEY  }}
                port: ${{ secrets.VPS_PORT }}
                script: |
                    if [ ! -d "/home/your_user/Geopolitics" ]; then
                        git clone git@github.com:your_username/Geopolitics.git /home/your_user/Geopolitics
                    else
                        cd /home/your_user/Geopolitics && git pull
                    fi
                                        